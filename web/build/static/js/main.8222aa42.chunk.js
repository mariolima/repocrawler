(this["webpackJsonprepocrawler-webclient"]=this["webpackJsonprepocrawler-webclient"]||[]).push([[0],{10:function(e,t,n){},14:function(e,t,n){e.exports=n(32)},26:function(e,t,n){},27:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(11),r=n.n(c),l=(n(9),n(2)),i=n(3),o=n(5),u=n(4),h=n(6),m=(n(26),function(e){e.name;var t=e.message;return s.a.createElement("section",null,"[",t.level,"] ",t.msg)}),g=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"Debug"},s.a.createElement("h2",null,"Debug"),this.props.logs.slice(-7).map((function(e,t){return s.a.createElement(m,{key:t,message:e,name:e.event})})))}}]),t}(a.Component),d=(n(27),n(33),n(12)),p=n.n(d),f=(n(30),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleMouseEnter=function(){n.setState({isHovering:!0}),n.props.onHover(n.state.match)},n.handleMouseLeave=function(){n.setState({isHovering:!1})},n.handleMouseLeave=function(){n.setState({isHovering:!1})},n.handleMouseClick=function(){window.open(n.state.match.URL,"_blank")},n.state={isHovering:!1,match:n.props.match},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.match;return s.a.createElement("div",{className:"Match",numberOfLines:1,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},"[",s.a.createElement("b",{className:e.Entropy<4.2?"match_type_a":"match_type_critical"},e.Rule.Type),"][",e.Entropy.toFixed(2),"][",e.Rule.Regex,"]",s.a.createElement(p.a,{highlightClassName:"match_value",searchWords:e.Values,autoEscape:!0,textToHighlight:e.Line,onClick:this.handleMouseClick}),this.state.isHovering)}}]),t}(a.Component)),v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleHover=function(e){n.props.selectedMatch(e),n.setState({hoveredMatch:e})},n.filterMatch=function(e){return n.props.filters[e.Rule.Regex].Ticked},n.state={hoveredMatch:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("pre",{className:"Matches"},s.a.createElement("h2",null,"Matches"),s.a.createElement("div",{className:"scroller"},this.props.matches.map((function(t){return e.filterMatch(t)&&s.a.createElement(f,{onHover:e.handleHover,match:t})}))))}}]),t}(a.Component),b=(n(10),n(13)),E=n.n(b),w=(a.Component,function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleMouseEnter=function(){n.setState({isHovering:!0}),n.props.onHover(n.state.host)},n.handleMouseLeave=function(){n.setState({isHovering:!1})},n.handleRegexTick=function(e){console.log("Ticking "+e),n.props.tickRegex(e)},n.state={isHovering:!1,host:n.props.host},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.props.regexes;var e=this.props.matches,t=this.props.crawlstate;return s.a.createElement("div",{className:"CrawlInfo"},s.a.createElement(E.a,{grow:1,shrink:4},s.a.createElement("div",null,s.a.createElement("h3",null,"Matches Found"),s.a.createElement("h1",null,e.length)),s.a.createElement("verticalLine",null),s.a.createElement("div",null,s.a.createElement("h3",null,"Repos analysed"),s.a.createElement("h1",null,t&&t.length>0?t[0].AnalysedRepos.length:0)),s.a.createElement("verticalLine",null),s.a.createElement("div",null,s.a.createElement("h3",null,"Crawling"),s.a.createElement("h1",null,t&&t.length>0?t[0].Crawling.length:0)),s.a.createElement("verticalLine",null),s.a.createElement("div",null,t&&t.length>0&&t[0].Crawling&&t[0].Crawling[0]?t.map((function(e,t){return e.Crawling.map((function(e,t){return s.a.createElement("div",null,e.Name)}))})):"[repo list]")))}}]),t}(a.Component)),M="ws://127.0.0.1:8090/ws",O=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).ws=new WebSocket(M),n.status="disconnected",n.setSelectedMatch=function(e){n.setState({selected_match:e})},n.tickRegexFilter=function(e){n.setState((function(t){return t.regexes[e].Ticked=!t.regexes[e].Ticked}))},n.addMessage=function(e){return n.setState((function(t){return t.logs.push(e)}))},n.setCrawlingState=function(e){return n.setState((function(t){return t.crawlstate=e}))},n.addMatch=function(e){n.setState((function(t){return t.regexes[e.Rule.Regex]?t.regexes[e.Rule.Regex].Count++:t.regexes[e.Rule.Regex]={Count:1,Ticked:!0}})),n.setState((function(t){return t.matches.push(e)}))},n.submitMessage=function(e){var t={name:n.state.name,message:e};n.ws.send(JSON.stringify(t))},n.state={name:"Bob",logs:[{msg:"Connecting..."}],matches:[],regexes:{},crawlstate:[],selected_match:""},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.ws.onopen=function(){console.log("connected"),e.submitMessage("wat"),e.status="connected"},this.ws.onmessage=function(t){var n=JSON.parse(t.data);console.log(n),"debug"==n.event?e.addMessage(n.data):"match"==n.event?e.addMatch(n.data.match):"state"==n.event&&e.setCrawlingState(n.data)},this.ws.onclose=function(){console.log("disconnected"),e.setState({ws:new WebSocket(M)})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(g,{logs:this.state.logs}),s.a.createElement(w,{regexes:this.state.regexes,tickRegex:this.tickRegexFilter,matches:this.state.matches,crawlstate:this.state.crawlstate}),s.a.createElement(v,{filters:this.state.regexes,selectedMatch:this.setSelectedMatch,matches:this.state.matches}))}}]),t}(a.Component);r.a.render(s.a.createElement(O,null),document.getElementById("root"))},9:function(e,t,n){}},[[14,1,2]]]);
//# sourceMappingURL=main.8222aa42.chunk.js.map